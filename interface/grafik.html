<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Solar Panel Historical Data</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard">
        <!-- HEADER -->
        <!-- <header class="header">
            <div class="logo">
                <span>PV</span>
            </div>
            <div class="title-block">
                <h1>Grafik Historis PLTS</h1>
                <p>Perkembangan Energi dan Daya Solar Panel</p>
            </div>
        </header> -->

        <!-- KONTEN -->
        <main class="content">
            <section class="row row-history">
                <!-- GRAFIK 1: YIELD HARI INI -->
                <section class="panel panel-chart">
                    <h2 class="panel-title">Yield Hari Ini (00.00 &ndash; Sekarang)</h2>
                    <p class="chart-subtitle">
                        Energi yang dihasilkan setiap 30 menit sejak tengah malam hingga waktu saat ini.
                    </p>
                    <div class="chart-wrapper">
                        <canvas id="yieldChart"></canvas>
                    </div>
                </section>

                <!-- GRAFIK 2: HISTORI 7 HARI TERAKHIR -->
                <section class="panel panel-chart">
                    <h2 class="panel-title">Histori 7 Hari Terakhir</h2>
                    <p class="chart-subtitle">
                        Perbandingan daya harian: PV Power, Grid Power, dan Beban Sistem.
                    </p>
                    <div class="chart-wrapper">
                        <canvas id="powerHistoryChart"></canvas>
                    </div>
                </section>
            </section>
        </main>

        <!-- FOOTER -->
        <footer class="footer">
            <p>
                PLTS Darul Ihsan &mdash; Visualisasi Data Historis untuk Edukasi Siswa SMP
            </p>
        </footer>
    </div>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Script untuk dummy data dan konfigurasi grafik -->
    <script>
        // ===== GRAFIK 1: YIELD HARI INI (30 menit) =====
        const ctxYield = document.getElementById('yieldChart').getContext('2d');

        // Contoh label 00.00 s/d 11.30 (bisa diperpanjang / diganti dinamis)
        const yieldLabels = [
            '00:00', '00:30', '01:00', '01:30', '02:00', '02:30',
            '03:00', '03:30', '04:00', '04:30', '05:00', '05:30',
            '06:00', '06:30', '07:00', '07:30', '08:00', '08:30',
            '09:00', '09:30', '10:00', '10:30', '11:00', '11:30'
        ];

        // Dummy data yield per 30 menit (kWh)
        const yieldData = [
            0.0, 0.0, 0.0, 0.0,
            0.1, 0.3, 0.6, 0.9,
            1.3, 1.7, 2.1, 2.6,
            3.2, 3.8, 4.4, 5.0,
            5.7, 6.3, 7.0, 7.6,
            8.2, 8.8, 9.3, 9.8
        ];

        new Chart(ctxYield, {
            type: 'line',
            data: {
                labels: yieldLabels,
                datasets: [{
                    label: 'Yield Hari Ini (kWh)',
                    data: yieldData,
                    borderColor: '#38bdf8',
                    backgroundColor: 'rgba(56, 189, 248, 0.18)',
                    borderWidth: 2.5,
                    tension: 0.35,
                    fill: true,
                    pointRadius: 2.5,
                    pointHoverRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#e5e7eb',
                            font: { size: 12 }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        titleFont: { size: 12 },
                        bodyFont: { size: 12 }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            color: '#9ca3af',
                            maxRotation: 0,
                            autoSkip: true,
                            maxTicksLimit: 8
                        },
                        grid: {
                            color: 'rgba(55, 65, 81, 0.6)'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#9ca3af'
                        },
                        grid: {
                            color: 'rgba(55, 65, 81, 0.6)'
                        }
                    }
                }
            }
        });

        // ===== GRAFIK 2: HISTORI 7 HARI TERAKHIR =====
        const ctxPower = document.getElementById('powerHistoryChart').getContext('2d');

        // Label 7 hari terakhir (dummy)
        const powerLabels = ['H-6', 'H-5', 'H-4', 'H-3', 'H-2', 'H-1', 'Hari ini'];

        const pvPowerDaily = [3.8, 4.1, 4.5, 4.0, 4.8, 5.1, 4.9];   // kW rata-rata PV
        const gridPowerDaily = [1.2, 1.0, 0.8, 0.9, 0.7, 0.6, 0.5]; // kW impor/ekspor grid
        const loadPowerDaily = [3.0, 3.2, 3.4, 3.1, 3.3, 3.5, 3.4]; // kW beban sistem

        new Chart(ctxPower, {
            type: 'line',
            data: {
                labels: powerLabels,
                datasets: [
                    {
                        label: 'PV Power (kW)',
                        data: pvPowerDaily,
                        borderColor: '#38bdf8',
                        backgroundColor: 'rgba(56, 189, 248, 0.18)',
                        tension: 0.35,
                        borderWidth: 2.3,
                        pointRadius: 3,
                        pointHoverRadius: 4
                    },
                    {
                        label: 'Grid Power (kW)',
                        data: gridPowerDaily,
                        borderColor: '#f97316',
                        backgroundColor: 'rgba(249, 115, 22, 0.18)',
                        tension: 0.35,
                        borderWidth: 2.3,
                        pointRadius: 3,
                        pointHoverRadius: 4
                    },
                    {
                        label: 'Beban Sistem (kW)',
                        data: loadPowerDaily,
                        borderColor: '#22c55e',
                        backgroundColor: 'rgba(34, 197, 94, 0.18)',
                        tension: 0.35,
                        borderWidth: 2.3,
                        pointRadius: 3,
                        pointHoverRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#e5e7eb',
                            font: { size: 12 }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        titleFont: { size: 12 },
                        bodyFont: { size: 12 }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            color: '#9ca3af'
                        },
                        grid: {
                            color: 'rgba(55, 65, 81, 0.6)'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#9ca3af'
                        },
                        grid: {
                            color: 'rgba(55, 65, 81, 0.6)'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
